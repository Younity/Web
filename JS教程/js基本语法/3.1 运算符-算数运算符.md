运算符-算数运算符
===========

*《JavaScript 教程》作者：阮一峰*

1 概述
------

JavaScript 共提供10个算术运算符，用来完成基本的算术运算。

加法运算符：x + y
减法运算符： x - y
乘法运算符： x * y
除法运算符：x / y
指数运算符：x ** y
余数运算符：x % y
自增运算符：++x 或者 x++
自减运算符：--x 或者 x--
数值运算符： +x
负数值运算符：-x

2 加法运算符
------------

**非数值的相加**

JavaScript 允许非数值的相加。非数值相加，会先转换为数值，然后相加。

**重载：连接运算符**

当两个运算符中有一个是字符串，加法运算符会变成连接运算符，会把两个字符串连接起来。

**对象相加**

运算子是对象，会自动转成原始类型的值，然后再相加。规则：自动调用 valueOf 方法，如果返回非原始类型值，则调用 toString。

```JS
var obj = { p: 1 };
obj + 2 // "[object Object]2"
obj + 'a' // "[object Object]a"

obj.valueOf() // { p: 1 }
obj.toString() // "[object Object]"
obj.valueOf().toString() // "[object Object]"
```
自定义 valueof 和 toString：

```JS
var obj = {
    valueOf: function () {
        return 1;
    },
    toString: function () {
        return 'hello';
    }
};

obj + 2 // "3"
obj + 'A' // "1A"
obj.valueOf() // 1
obj.toString() // "hello"
```
自定义 toString：

```JS
var obj = {
    toString: function () {
        return 'hello';
    }
};
obj + 2 // "hello2"
obj + 'A' // "helloA"

obj.valueOf() // {toString: ƒ}
obj.toString() // "hello"
```

这里有一个**特例**，如果运算子是一个Date对象的实例，那么会优先执行 toString 方法。

```JS
var obj = new Date();
obj.valueOf() // 1601137308324
obj.toString() // "Sun Sep 27 2020 00:21:48 GMT+0800 (中国标准时间)"

obj + 2 // "Sun Sep 27 2020 00:21:48 GMT+0800 (中国标准时间)2"
obj + 'a' // "Sun Sep 27 2020 00:21:48 GMT+0800 (中国标准时间)a"
```

3 取余运算符
-----------

需要注意的是，运算结果的正负号由第一个运算子的正负号决定。

余数运算符还可以用于浮点数的运算。但是，由于浮点数不是精确的值，无法得到完全准确的结果。

4 自增和自减运算符
----------------

运算之后，变量的值发生变化，这种效应叫做运算的副作用（side effect）。自增和自减运算符是仅有的两个具有副作用的运算符，其他运算符都不会改变变量的值。

自增和自减运算符有一个需要注意的地方，就是放在变量之后，会先返回变量操作前的值，再进行自增/自减操作；放在变量之前，会先进行自增/自减操作，再返回变量操作后的值。

```JS
var x = 1;
var y = 1;

x++ // 1
++y // 2
```

5 数值运算符，负数值运算符
-----------------------

数值运算符（`+`）的作用在于可以将任何值转为数值（与Number函数的作用相同）。

负数值运算符（`-`），也同样具有将一个值转为数值的功能，只不过得到的值正负相反。连用两个负数值运算符，等同于数值运算符。

6 指数运算符

注意，指数运算符是右结合，而不是左结合。即多个指数运算符连用时，先进行最右边的计算。

```js
// 相当于 2 ** (3 ** 2)
2 ** 3 ** 2
// 512
```
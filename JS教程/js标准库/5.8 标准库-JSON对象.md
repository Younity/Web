JSON 对象
===========

*《JavaScript 教程》作者：阮一峰*

**JSON 格式**

JSON 格式（JavaScript Object Notation 的缩写）是一种用于数据交换的文本格式，2001年由 Douglas Crockford 提出，目的是取代繁琐笨重的 XML 格式。

JSON 对值的类型和格式有严格的规定：

- 复合类型的值只能是数组或对象，不能是函数、正则表达式对象、日期对象。

- 原始类型的值只有四种：字符串、数值（必须以十进制表示）、布尔值和null（不能使用NaN, Infinity, -Infinity和undefined）。

- 字符串必须使用双引号表示，不能使用单引号。

- 对象的键名必须放在双引号里面。

- 数组或对象最后一个成员的后面，不能加逗号。

**JSON 对象**

JSON对象是 JavaScript 的原生对象，用来处理 JSON 格式数据。它有两个静态方法：

`JSON.stringify()`：用于将一个值转为 JSON 字符串。可以被 `JSON.parse()` 方法还原。注意，对于原始类型的字符串，转换结果会带双引号。

如果对象的属性是undefined、函数或 XML 对象，该属性会被 JSON.stringify() 忽略。对象的不可枚举的属性也会被忽略。

如果数组的成员是undefined、函数或 XML 对象，则这些值被转成null。

正则对象会被转成空对象。

第二个参数（可选）：一个数组，指定需要转换的对象属性。只对对象的属性有效，对数组无效；这个参数还可以是函数，这个函数接受两个参数，分别是被转换的对象的键名和键值。，用来修改 `JSON.stringify()` 的返回值。注意，这个处理函数是递归处理所有的键。

第三个参数（可选）：使得每个属性单独占据一行，并且将每个属性前面添加指定的前缀，用于增加返回的 JSON 字符串的可读性。`\t` 在每个属性前面添加一个制表符，`数字` 则表示每个属性前面添加的空格。

参数对象的 `toJSON()` 方法：

如果参数对象有自定义的toJSON()方法，那么JSON.stringify()会使用这个方法的返回值作为参数。

Date对象就有一个自己的toJSON()方法。

JSON.stringify() 默认不能转换正则对象，但是给正则对象设置了toJSON()方法以后，就可以转换正则对象了。

`JSON.parse()`：用于将 JSON 字符串转换成对应的值。

如果传入的字符串不是有效的 JSON 格式，JSON.parse()方法将报错。

为了处理解析错误，可以将JSON.parse()方法放在try...catch代码块中。

JSON.parse()方法可以接受一个处理函数，作为第二个参数，用法与JSON.stringify()方法类似。
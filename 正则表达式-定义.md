# 正则表达式

*内容来自《算法》第四版*

正则表达式由三种基本的操作和作为操作数的字符组成。

在这里，我们用 **语言** 指代一个字符串的集合，用 **模式** 指代一种语言的详细说明。

## 三种基本操作

1. **连接操作** 

   当我们写出 AB 时，就指定了一种 **语言** {AB}。它含有一个由两个字符组成的字符串，由 A 和 B 连接而成。

   

2. **或操作** 

   **或操作** 可以在 **模式** 中指定多种可能的匹配。我们用竖线符号 "|" 表示 **或操作**。

   例如，A | B 指定的 **语言** 是 {A, B} 。

   

3. **闭包操作** 

   **闭包操作** 可以将 **模式** 的部分重复任意的次数。**模式** 的 **闭包** 是由将模式和自身连接任意多次（包括零次）而得到的所有字符串所组成的 **语言** 。我们用符号 "\*" 标记在需要被重复的 **模式** 之后，以表示 **闭包** 。

   

4. **括号** 

   我们用括号来改变默认的 **优先级** 顺序。

   

5. **优先级**

   **括号 > 闭包操作  > 连接操作 > 或操作** 

   因此， AB | BCD 指定的 **语言** 是 {AB, BCD} ；

   AB\* 指定的 **语言** 由一个 A 和 0 个或多个 B 的字符串组成。

   

6. **空字符串** 

   **空字符串** 的记号是 ∈，它存在于所有文本字符串之中。



## 缩略写法

1. **字符集描述符**（这些记号都是 **或操作** 的简写）：

   | 名称       | 记法                                                  | 举例        |
   | ---------- | ----------------------------------------------------- | ----------- |
   | 通配符     | .                                                     | A.B         |
   | 指定的集合 | 包含在 \[ ] 中的字符，表示这些字符中的任意一个         | [AEIOU]\*   |
   | 范围集合   | 包含在 \[ ] 中，由 "-" 分隔                            | \[A-Z][0-9] |
   | 补集       | 包含在 \[ ] 中，首字母为 "^"，表示任意非该括号内的字符 | [^AEIOU]\*  |



2. **闭包的简写** 

	| 选项               | 记法            | 举例      | 原始写法       |
	| ------------------ | --------------- | --------- | -------------- |
	| 至少重复一次       | +               | (AB)+     | (AB)(AB)*      |
	| 重复 0 或 1 次     | ?               | (AB)?     | ∈\|AB          |
	| 重复指定次数       | 由 \{ } 指定次数 | (AB){3}   | (AB)(AB)(AB)   |
	| 重复指定范围的次数 | 由 \{ } 指定范围 | (AB){1-2} | (AB)\|(AB)(AB) |

3. **转义序列** 

   某些字符，如 "\\"、"\."、"|"、"\*"、"("、")" ，都是用来构造正则表达式的 **元字符** 。

   我们使用以反斜杠开头的 **转义序列** 来将 **元字符** 和字母表中的字符区别开来。

   一个反斜杠加上单个 **元字符** ，就是这个字符本身。例如，"\\\\" 表示字符 "\\"。

   其他 **转义序列** 表示了 **特殊字符** 和 **空白字符**。例如，"\\t" 表示一个制表符。

   

## 正式定义

一个正则表达式可以是（这段定义描述了正则表达式的 **语法** ）：

- 空字符串 ∈；
- 单个字符；
- 包含在括号中的另一个正则表达式；
- 两个或多个连接起来的正则表达式；
- 由或运算符分隔的两个或多个正则表达式；
- 由闭包运算符标记的一个正则表达式。



以下对正则表达式的非形式化的描述是它的 **语义** ：

每个正则表达式表示的都是一个字符串的集合，它们的定义如下所述。

- 空正则表达式表示字符串的集合为空，含有 0 个元素。

- 一个字符表示的字符串的集合含有一个元素，即该字符本身。

- 一个由括号和包含在其中的正则表达式组成的正则表达式表示的字符串的集合与括号内的正则表达式相同。

- 由两个正则表达式连接起来的正则表达式表示的字符串的集合为这两个正则表达式分别表示的字符串集合的叉乘。（按照正则表达式中指定的顺序，由一个字符串集合中的元素和另一个字符串集合中的元素相连所能够组合而成的所有字符串。）

- 由或运算符连接的两个正则表达式所表示的字符串的集合为两个正则表达式所分别表示的字符串集合的并集。

- 由一个正则表达式的闭包所表示的字符串的集合由空字符串或将被修饰的正则表达式所表示的字符串集合重复任意次所得到的所有字符串所组成。

  



